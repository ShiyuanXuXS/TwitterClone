
@model TwitterClone.Models.Tweet

@{
    @* var isCurrentUserAuthor = Model.Author.UserName == User.Identity.Name; *@
    var isCurrentUserAuthor = Model.Author.UserName == "AAA111";
}

<div class="col-md-6 mb-4">
        <div class="card tweetCard border-0" >
            <div class="card-body p-4">
                <div class="d-flex align-items-center mb-2">
                @if (!string.IsNullOrEmpty(Model.Author.Avatar))
                {
                    <img src="@Model.Author.Avatar" alt="Author Avatar" class="rounded-circle" width="32" height="32">
                }
                else
                {
                    <i class="bi bi-person-fill fs-4 text-muted"></i> 
                }
                <div class="ms-2">
                    <h6 class="mb-0">@Model.Author.NickName</h6>
                    <p class="text-muted">@Model.Author.UserName</p>
                </div>
                <button type="button" class="btn btn-light ms-auto">
                    <i class="bi bi-person-plus-fill"></i> 
                </button>
            </div>
                <div id="readonlyEditor_@Model.Id"></div>
                
                <p class="card-text"><small class="text-muted">@Html.DisplayFor(modelItem => Model.CreatedAt)</small></p>
                <div class="btn-group" role="group" aria-label="">
                    <button type="button" class="btn btn-light mx-2 rounded">
                        <i class="bi bi-chat"></i> <!-- replay -->
                    </button>
                    <button type="button" class="btn btn-light mx-2 rounded">
                        <i class="bi bi-arrow-repeat"></i><!-- Repost -->
                    </button>
                    <button type="button" class="btn btn-light mx-2 rounded">
                        <i class="bi bi-heart"></i> <!-- Like -->
                    </button>
                    @if (isCurrentUserAuthor)
                    {
                        <a asp-page="./Edit" asp-route-id="@Model.Id" class="btn btn-light mx-2 rounded">
                            <i class="bi bi-pencil"></i> <!--Edit-->
                        </a>
                        <a asp-page="./Delete" asp-route-id="@Model.Id" class="btn btn-danger mx-2 rounded">
                            <i class="bi bi-trash"></i> <!--Delete-->
                        </a>
                    }
                </div>
                
            </div>
        </div>
        
        <script>
            ClassicEditor
                .create(document.querySelector('#readonlyEditor_@Model.Id'), {
                    isReadOnly: true,
                    toolbar: []
                })
                .then(editor => {
                    editor.setData(`@Html.Raw(Model.Body)`);
                    editor.enableReadOnlyMode( '#readonlyEditor_@Model.Id');
                })
                .catch(error => {
                    console.error(error);
                });
        </script>
</div>


